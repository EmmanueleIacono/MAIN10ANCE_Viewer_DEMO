<!DOCTYPE html>
<html>
<head>
  <title>MAIN10ANCE Viewer</title>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="./img/favicon.ico" />
  <!-- Common packages: jQuery, Bootstrap, jsTree -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/jstree.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/themes/default/style.min.css" />
  <!-- LEAFLET -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
  <!-- Autodesk Forge Viewer files -->
  <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.min.css" type="text/css">
  <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/viewer3D.min.js"></script>
  <!-- this project files -->
  <link href="css/main.css" rel="stylesheet" />
  <script src="js/ForgeTree.js"></script>
  <script src="js/ForgeViewer.js"></script>
  <!-- PER QUESTI SOTTO SERVE DEFER PER CARICARLI DOPO L'HTML -->
  <script src="js/FrontEndDB.js" defer></script>
  <script src="js/MappaGIS.js" defer></script>
  <script src="js/ConsultazioneDB.js" defer></script>
</head>
<body>
  <!-- Fixed navbar by Bootstrap: https://getbootstrap.com/examples/navbar-fixed-top/ -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <ul class="nav navbar-nav left tabs">
        <li>
          <a href="https://main10ance.eu/" target="_blank" id="logoSito">
            <img alt="Main10ance" src="./img/AsseII_MAIN10ANCE.png" height="50">
          </a>
        </li>
        <li>
          <div id="dropdown-container">
            <!-- <button type="button" class="navBtn" id="scegliModello" data-toggle="modal" data-target="#scegliModelloModal">SELEZIONA CAPPELLA</button> -->
            <button type="button" class="navBtn dropdown-toggle" id="scegliModello" data-toggle="dropdown">
              SELEZIONA CAPPELLA <span class="glyphicon glyphicon-triangle-bottom"></span>
            </button>
            <div class="panel panel-default dropdown-menu">
              <!-- <div class="panel-heading" id="pannello-modal-header" data-toggle="tooltip">
                Buckets &amp; Objects
                <span id="refreshBuckets" class="glyphicon glyphicon-refresh" style="cursor: pointer"></span>
              </div> -->
              <div id="appBuckets">
                tree here
              </div>
            </div>
          </div>
        </li>
        <li data-tab-target="#forgeViewer" class="tab" id="apriTabBIM">BIM VIEWER</li>
        <li data-tab-target="#tabMappa" class="tab" id="apriTabGIS">GIS VIEWER</li>
        <li data-tab-target="#tabDatabase" class="tab" id="apriTabDatabase">DATABASE</li>
        <li data-tab-target="#tabDashboard" class="tab" id="apriTabDashboard">DASHBOARD</li>
      </ul>
    </div>
  </nav>
  <!-- End of navbar -->
  <div class="container-fluid fill">
    <div class="row fill">
      <div class="col-sm-9 fill tab-content">
        <div id="forgeViewer" data-tab-content></div>
        <div class="panel panel-default" id="tabMappa" data-tab-content>
          <div class="panel-heading" id="pannello-modal-header" data-toggle="tooltip">
            <!-- GIS - PANEL HEADING -->
            <div id="contenitore-selettori">
              <span id="refreshGIS" class="glyphicon glyphicon-refresh" style="cursor: pointer"></span>
            </div>
            <button type="button" id="spegniGeoJSON">VISIBILITA' GEOJSON-TESTER</button>
          </div>
          <!-- GIS -->
          <div id="appGIS">
            <div id="mappa"></div>
          </div>
        </div>
        <div id="tabDatabase" data-tab-content>
          <div id="filtroDB">
            <div id="colDBCapp" class="colonnaDB"><h4>Cappella</h4></div>
            <!-- <div id="colDBLOD3" class="colonnaDB"><h4>LOD 3</h4>
              <input type="radio" name="radioLOD3" id="radioLOD3">
            </div>
            <div id="colDBLOD4" class="colonnaDB"><h4>LOD 4</h4>
              <input type="radio" name="radioLOD4" id="radioLOD4">
            </div> -->
            <div id="colDBLOD34" class="colonnaDB">
              <form>
                <input type="radio" name="radioLOD" id="radioLOD3">
                <label for="radioLOD3">LOD 3</label>
                <select name="selectLOD3" id="selectLOD3" disabled></select>
                <br>
                <input type="radio" name="radioLOD" id="radioLOD4">
                <label for="radioLOD4">LOD 4</label>
                <select name="selectLOD4" id="selectLOD4" disabled></select>
              </form>
            </div>
            <div id="colDBLOD5" class="colonnaDB"><h4>LOD 5</h4>
              <select name="selectLOD5" id="selectLOD5"></select>
            </div>
          </div>
          <div id="risultatiDB"></div>
        </div>
        <div id="tabDashboard" data-tab-content>QUI DASHBOARD</div>
      </div>
      <!-- SEZIONE DB -->
      <div class="col-sm-3 fill" id="pannello-db">
        <div class="panel panel-default fill" id="pannello-db-child">
          <div class="panel-heading" id="pannello-db-header" data-toggle="tooltip">
            <b>PARAMETRI</b>
          </div>
          <div class="pannelloDB">
            <!-- BOTTONE DI REFRESH -->
            <!-- <button id="refreshParams" class="glyphicon glyphicon-refresh dbBtn" title="Home" style="cursor: pointer" height="30"></button> -->
            <button id="refreshParams" class="glyphicon glyphicon-home dbBtn" title="Home" style="cursor: pointer" height="30"></button>

            <!-- BOTTONE DI QUERY -->
            <!-- <button type="button" class="dbBtn" id="queryDB" title="Interroga">INTERROGA</button> -->
            <button id="queryDB" class="glyphicon glyphicon-list-alt dbBtn" title="Interroga" style="cursor: pointer" height="30"></button>

            <!-- BOTTONE DI MODIFICA -->
            <!-- <button type="button" class="dbBtn" id="modificaDB" title="Modifica">MODIFICA</button> -->
            <button id="modificaDB" class="glyphicon glyphicon-floppy-disk dbBtn" title="Modifica" style="cursor: pointer" height="30"></button>

            <!-- BOTTONE DI ANNULLA -->
            <!-- <button type="button" class="dbBtn" id="annullaDB" title="Annulla">ANNULLA</button> -->
            <button id="annullaDB" class="glyphicon glyphicon-erase dbBtn" title="Annulla" style="cursor: pointer" height="30"></button>

            <!-- FORM -->
            <form id="formDB" spellcheck="false"></form>
          </div>
        </div>
      </div>
      <!-- FINE SEZIONE DB -->
      <!-- <div id="tabDatabase" data-tab-content>QUI DATABASE</div>
      <div id="tabDashboard" data-tab-content>QUI DASHBOARD</div> -->
    </div>
  </div>

  <!-- SCRIPT PER GESTIONE TABS -->
<script>
  const tabs = document.querySelectorAll('[data-tab-target]');
  const tabContents = document.querySelectorAll('[data-tab-content]');

  tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
          // per prima cosa prendo il target su cui ho cliccato
          const target = document.querySelector(tab.dataset.tabTarget);
          // poi faccio sparire tutti i tab
          tabContents.forEach((tabContent) => {
              tabContent.classList.remove('active');
          });
          // questo Ã¨ per rimuovere il background color di tutti
          tabs.forEach((tab) => {
              tab.classList.remove('active');
          });
          // qui aggiungo il background color al tab selezionato
          tab.classList.add('active');
          // infine rendo visibile solo quello su cui ho cliccato
          target.classList.add('active');
      });
  });
</script>
<!-- SCRIPT PER GESTIONE RADIO LOD DB -->
<script>
  if(document.getElementById('radioLOD3').checked) {
  // abilito select lod 3
  document.getElementById('selectLOD3').disabled = false;
  }
  else if(document.getElementById('radioLOD4').checked) {
    // abilito select lod 4
    document.getElementById('selectLOD4').disabled = false;
  }
</script>
</body>
</html>
