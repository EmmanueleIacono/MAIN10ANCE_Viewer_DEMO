<!DOCTYPE html>
<html>
<head>
  <title>MAIN10ANCE Viewer</title>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="./img/favicon.ico" />
  <!-- Common packages: jQuery, Bootstrap, jsTree -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/jstree.min.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.3.7/themes/default/style.min.css" />
  <!-- LEAFLET -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.4/proj4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.min.js"></script>
  <!-- Autodesk Forge Viewer files -->
  <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.min.css" type="text/css">
  <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/viewer3D.min.js"></script>
  <!-- this project files -->
  <link href="css/main.css" rel="stylesheet" />
  <script src="js/ForgeTree.js"></script>
  <script src="js/ForgeViewer.js"></script>
  <!-- PER QUESTI SOTTO SERVE DEFER PER CARICARLI DOPO L'HTML -->
  <script src="js/FrontEndDB.js" defer></script>
  <script src="js/MappaGIS.js" defer></script>
  <script src="js/ConsultazioneDB.js" defer></script>
</head>
<body>
  <!-- Fixed navbar by Bootstrap: https://getbootstrap.com/examples/navbar-fixed-top/ -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <ul class="nav navbar-nav left tabs">
        <li>
          <a href="https://main10ance.eu/" target="_blank" id="logoSito">
            <img alt="Main10ance" src="./img/AsseII_MAIN10ANCE.png" height="50">
          </a>
        </li>
        <li>
          <div id="dropdown-container">
            <!-- <button type="button" class="navBtn" id="scegliModello" data-toggle="modal" data-target="#scegliModelloModal">SELEZIONA CAPPELLA</button> -->
            <button type="button" class="navBtn dropdown-toggle" id="scegliModello" data-toggle="dropdown">
              SELEZIONA CAPPELLA <span class="glyphicon glyphicon-triangle-bottom"></span>
            </button>
            <div class="panel panel-default dropdown-menu">
              <!-- <div class="panel-heading" id="pannello-modal-header" data-toggle="tooltip">
                Buckets &amp; Objects
                <span id="refreshBuckets" class="glyphicon glyphicon-refresh" style="cursor: pointer"></span>
              </div> -->
              <div id="appBuckets">
                tree here
              </div>
            </div>
          </div>
        </li>
        <!-- <li data-tab-target="#forgeViewer" class="tab" id="apriTabBIM">BIM VIEWER</li>
        <li data-tab-target="#tabMappa" class="tab" id="apriTabGIS">GIS VIEWER</li>
        <li data-tab-target="#tabDatabase" class="tab" id="apriTabDatabase">DATABASE</li>
        <li data-tab-target="#tabDashboard" class="tab" id="apriTabDashboard">DASHBOARD</li> -->
        <li data-tab-target="#tab1" class="tab" id="apriTabBIM">BIM VIEWER</li>
        <li data-tab-target="#tab2" class="tab" id="apriTabGIS">GIS VIEWER</li>
        <li data-tab-target="#tab3" class="tab" id="apriTabDatabase">DATABASE</li>
        <li data-tab-target="#tab4" class="tab" id="apriTabDashboard">DASHBOARD</li>
      </ul>
    </div>
  </nav>
  <!-- End of navbar -->
  <div class="container-fluid fill">
    <div class="row fill tab-content">
      <div class="fill" id="tab1" data-tab-content>
        <div class="col-sm-9 fill">
          <div id="forgeViewer"></div>
        </div>
        <!-- SEZIONE DB -->
        <div class="col-sm-3 fill" id="pannello-db">
          <div class="panel panel-default fill" id="pannello-db-child">
            <div class="panel-heading" id="pannello-db-header" data-toggle="tooltip">
              <b>PARAMETRI</b>
            </div>
            <div class="pannelloDB">
              <!-- BOTTONE DI REFRESH -->
              <button id="refreshParams" class="glyphicon glyphicon-home dbBtn" title="Home" style="cursor: pointer" height="30"></button>
  
              <!-- BOTTONE DI QUERY -->
              <button id="queryDB" class="glyphicon glyphicon-list-alt dbBtn" title="Interroga" style="cursor: pointer" height="30"></button>
  
              <!-- BOTTONE DI MODIFICA -->
              <button id="modificaDB" class="glyphicon glyphicon-floppy-disk dbBtn" title="Modifica" style="cursor: pointer" height="30"></button>
  
              <!-- BOTTONE DI ANNULLA -->
              <button id="annullaDB" class="glyphicon glyphicon-erase dbBtn" title="Annulla" style="cursor: pointer" height="30"></button>
  
              <!-- FORM -->
              <form id="formDB" spellcheck="false"></form>
            </div>
          </div>
        </div>
        <!-- FINE SEZIONE DB -->
      </div>
      <div class="fill" id="tab2" data-tab-content>
        <div class="panel panel-default col-sm-9 fill" id="tabMappa">
          <div class="panel-heading" id="pannello-modal-header" data-toggle="tooltip">
            <!-- GIS - PANEL HEADING -->
            <!-- <div id="contenitore-selettori">
              <span id="refreshGIS" class="glyphicon glyphicon-refresh" style="cursor: pointer"></span>
              <button class="dropdown-toggle" data-toggle="dropdown">Sacro Monte
                <span class="glyphicon glyphicon-menu-down"></span>
              </button>
              <ul class="dropdown-menu" id="contenitore-selettori-2"></ul>
            </div> -->
            <!-- <button type="button" id="spegniGeoJSON">VISIBILITA' GEOJSON-TESTER</button> -->
          </div>
          <!-- GIS -->
          <div id="appGIS">
            <div id="mappa"></div>
            <!-- <div id="legendaLayer">QUI LAYERS</div> -->
          </div>
        </div>
        <!-- PANNELLO LATERALE -->
        <div class="col-sm-3 fill" id="pannello-lat-gis">
          <div class="panel panel-default fill" id="pannello-lat-gis-child">
            <div class="panel-heading" id="pannello-lat-gis-header" data-toggle="tooltip">
              <b>FILTRI</b>
            </div>
            <div class="pannelloLatGIS">
              <div id="contenitore-selettori">
                <span id="refreshGIS" class="glyphicon glyphicon-refresh" style="cursor: pointer"></span>
                <button class="dropdown-toggle" data-toggle="dropdown">Sacro Monte
                  <span class="glyphicon glyphicon-menu-down"></span>
                </button>
                <ul class="dropdown-menu" id="contenitore-selettori-2"></ul>
              </div>
              <div id="legendaLayer">QUI LAYERS</div>
              <!-- BOTTONE DI REFRESH -->
              <!-- <button id="refreshParams" class="glyphicon glyphicon-home dbBtn" title="Home" style="cursor: pointer" height="30"></button> -->
  
              <!-- BOTTONE DI QUERY -->
              <!-- <button id="queryDB" class="glyphicon glyphicon-list-alt dbBtn" title="Interroga" style="cursor: pointer" height="30"></button> -->
  
              <!-- BOTTONE DI MODIFICA -->
              <!-- <button id="modificaDB" class="glyphicon glyphicon-floppy-disk dbBtn" title="Modifica" style="cursor: pointer" height="30"></button> -->
  
              <!-- BOTTONE DI ANNULLA -->
              <!-- <button id="annullaDB" class="glyphicon glyphicon-erase dbBtn" title="Annulla" style="cursor: pointer" height="30"></button> -->
  
              <!-- FORM -->
              <form id="formDB" spellcheck="false"></form>
            </div>
          </div>
        </div>
        <!-- FINE PANNELLO LATERALE -->
      </div>
      <div class="fill" id="tab3" data-tab-content>
        <div id="tabDatabase">
          <div id="filtroDB">
            <div id="colDBLOD34" class="colonnaDB">
              <form>
                <input type="radio" name="radioLOD" id="radioLOD3">
                <label for="radioLOD3">Opere immobili</label>
                <select name="selectLOD3" id="selectLOD3" disabled></select>
                <label for="selectEdificio">Seleziona un edificio</label>
                <select name="selectEdificio" id="selectEdificio" disabled></select>
                <br>
                <input type="radio" name="radioLOD" id="radioLOD4">
                <label for="radioLOD4">Opere mobili e superfici decorate</label>
                <select name="selectLOD4" id="selectLOD4" disabled></select>
                <label for="selectCappella">Seleziona una cappella</label>
                <select name="selectCappella" id="selectCappella" disabled></select>
              </form>
            </div>
            <div id="colDBLOD5" class="colonnaDB">
              <label for="selectLOD5">Attività</label>
              <select name="selectLOD5" id="selectLOD5" disabled></select>
            </div>
          </div>
          <div id="risultatiDB"></div>
        </div>
      </div>
      <div class="fill" id="tab4" data-tab-content>
        <div id="tabDashboard">QUI DASHBOARD</div>
      </div>
    </div>
  </div>

  <!-- SCRIPT PER GESTIONE TABS -->
<script>
  const tabs = document.querySelectorAll('[data-tab-target]');
  const tabContents = document.querySelectorAll('[data-tab-content]');

  tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
          // per prima cosa prendo il target su cui ho cliccato
          const target = document.querySelector(tab.dataset.tabTarget);
          // poi faccio sparire tutti i tab
          tabContents.forEach((tabContent) => {
              tabContent.classList.remove('active');
          });
          // questo è per rimuovere il background color di tutti
          tabs.forEach((tab) => {
              tab.classList.remove('active');
          });
          // qui aggiungo il background color al tab selezionato
          tab.classList.add('active');
          // infine rendo visibile solo quello su cui ho cliccato
          target.classList.add('active');
      });
  });
</script>
<!-- SCRIPT PER GESTIONE RADIO LOD DB -->
<script>
  setInterval(() => {
    if(document.getElementById('radioLOD3').checked) {
      // abilito select lod 3
      document.getElementById('selectLOD3').disabled = false;
      document.getElementById('selectLOD4').disabled = true;
      document.getElementById('selectEdificio').disabled = false;
      document.getElementById('selectCappella').disabled = true;
      document.getElementById('selectLOD5').disabled = false;
    }
    else if(document.getElementById('radioLOD4').checked) {
      // abilito select lod 4
      document.getElementById('selectLOD4').disabled = false;
      document.getElementById('selectLOD3').disabled = true;
      document.getElementById('selectCappella').disabled = false;
      document.getElementById('selectEdificio').disabled = true;
      document.getElementById('selectLOD5').disabled = false;
    }
  }, 100);
</script>
</body>
</html>
